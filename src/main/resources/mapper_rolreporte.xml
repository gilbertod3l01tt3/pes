<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ROLREPORTE">

	<resultMap id="rolReporteResultMap" type="PORTALBI_ROLREPORTE">
		<result property = "idRol" column = "ID_CONFIGROL"/>
		<result property = "idReporte" column = "ID_CONFIGREPORTE"/>
		<result property = "nombreDespliegue" column = "NOMBREDESPLIEGUE"/>
		<result property = "ordenDespliegue" column = "ORDENDESPLIEGUE"/>
	   	<result property = "parametrosMandatorios" column = "PARAMETROMANDATORIO"/>
	   	<result property = "parametrosOpcionales" column = "PARAMETROOPCIONAL"/>
	   	<result property = "parametrosNulos" column = "PARAMETRONULO"/>
	   	<result property = "pagina" column = "PAGINA"/>
	</resultMap>
	
	<select id="selectSingle" parameterType="PORTALBI_ROLREPORTE" resultMap="rolReporteResultMap">
		SELECT *
			FROM PORTALBI_ROLREPORTE 
			WHERE ID_CONFIGROL = #{idRol} 
				AND ID_CONFIGREPORTE = #{idReporte}
	</select>
	
	<select id="selectSingleByNombre" parameterType="String" resultMap="rolReporteResultMap">
		SELECT * FROM PORTALBI_ROLREPORTE 
			WHERE NOMBREDESPLIEGUE = '#{nombreDespliegue}'
	</select>
	
	<select id="selectAll" resultMap = "rolReporteResultMap">
	   SELECT * FROM PORTALBI_ROLREPORTE
	   ORDER BY ID_CONFIGROL, ID_CONFIGREPORTE
	</select>
	
	<select id="selectReportsByRol" parameterType="Long" resultMap="rolReporteResultMap">
		SELECT * FROM PORTALBI_ROLREPORTE 
		WHERE ID_CONFIGROL = #{idRol}
	</select>
	
	<select id="selectMandatory" parameterType="PORTALBI_ROLREPORTE" resultMap="rolReporteResultMap">
		SELECT PARAMETROMANDATORIO FROM PORTALBI_ROLREPORTE
				WHERE ID_CONFIGROL= #{idRol} 
					AND ID_CONFIGREPORTE= #{idReporte}
	</select>
	
	<select id="selectOptional" parameterType="PORTALBI_ROLREPORTE" resultMap="rolReporteResultMap">
		SELECT PARAMETROOPCIONAL FROM PORTALBI_ROLREPORTE
				WHERE ID_CONFIGROL= #{idRol} 
					AND ID_CONFIGREPORTE= #{idReporte}
	</select>
	
	<select id="selectNull" parameterType="PORTALBI_ROLREPORTE" resultMap="rolReporteResultMap">
		SELECT PARAMETRONULO FROM PORTALBI_ROLREPORTE
				WHERE ID_CONFIGROL= #{idRol} 
					AND ID_CONFIGREPORTE= #{idReporte}
	</select>
	
	<select id="selectMaxId" parameterType="PORTALBI_ROLREPORTE" resultMap="rolReporteResultMap">
	   SELECT MAX (ID_CONFIGREPORTE) FROM PORTALBI_ROLREPORTE 
	   WHERE ID_CONFIGROL = #{idRol}
	</select>
	
	
	<insert id="insert" parameterType="PORTALBI_ROLREPORTE">
	   INSERT INTO PORTALBI_ROLREPORTE (ID_CONFIGROL,ID_CONFIGREPORTE,NOMBREDESPLIEGUE,ORDENDESPLIEGUE,
	   			PARAMETROMANDATORIO,PARAMETROOPCIONAL,PARAMETRONULO,PAGINA)
			VALUES (#{idRol},#{idReporte},#{nombreDespliegue},#{ordenDespliegue},
				#{parametrosMandatorios},#{parametrosOpcionales},#{parametrosNulos},#{pagina})
	</insert>
	
	<delete id="delete" parameterType="PORTALBI_ROLREPORTE">
		DELETE FROM PORTALBI_ROLREPORTE 
		WHERE ID_CONFIGROL = #{idRol} and ID_CONFIGREPORTE = #{idReporte}
	</delete>
	
	<update id="update" parameterType="PORTALBI_ROLREPORTE">
	   UPDATE PORTALBI_ROLREPORTE set NOMBREDESPLIEGUE=#{nombreDespliegue},ORDENDESPLIEGUE=#{ordenDespliegue},PARAMETROMANDATORIO=#{parametrosMandatorios},
				PARAMETROOPCIONAL=#{parametrosOpcionales}, PARAMETRONULO=#{parametrosNulos}, PAGINA=#{pagina} 
			WHERE ID_CONFIGROL=#{idRol} 
				AND ID_CONFIGREPORTE=#{idReporte}
	</update>

</mapper>
